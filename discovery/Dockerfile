FROM node AS npm
ARG DISCOVERY_SERVER_PATH
ARG DISCOVERY_SERVER_LISTEN_PORT
ARG DISCOVERY_SERVER_WEBSOCKET_PATH
ARG DISCOVERY_SERVER_WEBSOCKET_SUBPROTOCOL
ARG DISCOVERY_SERVER_WEBSOCKET_LISTEN_PORT
WORKDIR /app
COPY . .
RUN npm ci
EXPOSE $DISCOVERY_SERVER_LISTEN_PORT $DISCOVERY_SERVER_WEBSOCKET_LISTEN_PORT
CMD ["npx", "ts-node", "index.ts"]